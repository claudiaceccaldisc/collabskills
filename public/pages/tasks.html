<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestion des Tâches</title>
  <!-- Inclusion des styles pour la sidebar et la page Tasks -->
  <link rel="stylesheet" href="../styles/sidebar.css">
  <link rel="stylesheet" href="../styles/tasks.css">
  <!-- Inclusion de Chart.js via CDN pour le diagramme -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script defer src="../js/tasks.js"></script>
</head>
<body onload="checkAuth()">
  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <button class="toggle-sidebar" onclick="toggleSidebar()">☰</button>
    <ul>
      <li>
        <a href="dashboard.html">
          <span class="icon">🏠</span>
          <span class="text">Accueil</span>
        </a>
      </li>
      <li>
        <a href="projects.html">
          <span class="icon">📁</span>
          <span class="text">Projets</span>
        </a>
      </li>
      <li>
        <a href="skills.html">
          <span class="icon">🎓</span>
          <span class="text">Compétences</span>
        </a>
      </li>
      <li>
        <a href="team.html">
          <span class="icon">👥</span>
          <span class="text">Collaborateurs</span>
        </a>
      </li>
      <li>
        <a href="#" onclick="logout()">
          <span class="icon">🚪</span>
          <span class="text">Déconnexion</span>
        </a>
      </li>
    </ul>
  </div>

  <!-- Contenu principal -->
  <div class="main-content">
    <header>
      <h1>Gestion des Tâches</h1>
    </header>
    <main>
      <!-- Section: Tableau des tâches (en haut) -->
      <section class="card">
        <h2>Vue des Tâches</h2>
        <div class="table-responsive">
          <table id="tasksTable">
            <thead>
              <tr>
                <th>Projet</th>
                <th>Titre</th>
                <th>Description</th>
                <th>Date d'échéance</th>
                <th>Statut</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="tasksTableBody">
              <!-- Lignes générées par JavaScript -->
            </tbody>
          </table>
        </div>
      </section>

      <!-- Section: Formulaire et Diagramme (en bas) -->
      <div class="bottom-container">
        <!-- Formulaire d'ajout/édition (colonne de gauche) -->
        <section class="card form-card">
          <h2><span class="form-icon">📝</span> <span id="formTitle">Ajouter une Tâche</span></h2>
          <form id="taskForm">
            <input type="hidden" id="taskId">
            <label for="taskProject">Projet :</label>
            <select id="taskProject" required>
              <option value="">--Sélectionnez un projet--</option>
              <!-- Options générées par JavaScript -->
            </select>

            <label for="taskTitle">Titre :</label>
            <input type="text" id="taskTitle" maxlength="100" required>

            <label for="taskDescription">Description :</label>
            <textarea id="taskDescription" rows="4"></textarea>

            <label for="taskDueDate">Date d'échéance :</label>
            <input type="date" id="taskDueDate" required>

            <label for="taskStatus">Statut :</label>
            <select id="taskStatus" required>
              <option value="à faire">À faire</option>
              <option value="en cours">En cours</option>
              <option value="terminé">Terminé</option>
            </select>

            <button type="submit" id="submitButton">Ajouter la Tâche</button>
            <button type="button" id="cancelEdit" style="display:none;">Annuler</button>
          </form>
        </section>

        <!-- Diagramme des tâches (colonne de droite) -->
        <section class="card chart-card">
          <h2>Statistiques des Tâches</h2>
          <canvas id="taskChart"></canvas>
        </section>
      </div>
    </main>
    <footer>
      <p>© 2025 Gestion des Tâches. Tous droits réservés.</p>
    </footer>
  </div>
</body>
</html>
