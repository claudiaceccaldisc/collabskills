<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestion des Tâches</title>
  <!-- Inclusion des styles pour la sidebar et la page Tasks -->
  <link rel="stylesheet" href="../styles/sidebar.css">
  <link rel="stylesheet" href="../styles/tasks.css">
  <script defer src="../js/tasks.js"></script>
</head>
<body onload="checkAuth()">
  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <button class="toggle-sidebar" onclick="toggleSidebar()">☰</button>
    <ul>
      <li>
        <a href="dashboard.html">
          <span class="icon">🏠</span>
          <span class="text">Accueil</span>
        </a>
      </li>
      <li>
        <a href="projects.html">
          <span class="icon">📁</span>
          <span class="text">Projets</span>
        </a>
      </li>
      <li>
        <a href="skills.html">
          <span class="icon">🎓</span>
          <span class="text">Compétences</span>
        </a>
      </li>
      <li>
        <a href="team.html">
          <span class="icon">👥</span>
          <span class="text">Collaborateurs</span>
        </a>
      </li>
      <li>
        <a href="#" onclick="logout()">
          <span class="icon">🚪</span>
          <span class="text">Déconnexion</span>
        </a>
      </li>
    </ul>
  </div>

  <!-- Contenu principal -->
  <div class="main-content">
    <header>
      <h1>Gestion des Tâches</h1>
    </header>
    <main>
      <!-- Formulaire d'ajout de tâche présenté sous forme de card design -->
      <section class="card">
        <h2><span class="form-icon">📝</span> Ajouter une Tâche</h2>
        <form id="taskForm">
          <label for="taskProject">Projet :</label>
          <select id="taskProject" required>
            <option value="">--Sélectionnez un projet--</option>
            <!-- Les options seront ajoutées par JavaScript -->
          </select>

          <label for="taskTitle">Titre :</label>
          <input type="text" id="taskTitle" maxlength="100" required>

          <label for="taskDescription">Description :</label>
          <textarea id="taskDescription" rows="4"></textarea>

          <label for="taskDueDate">Date d'échéance :</label>
          <input type="date" id="taskDueDate" required>

          <label for="taskStatus">Statut :</label>
          <select id="taskStatus" required>
            <option value="à faire">À faire</option>
            <option value="en cours">En cours</option>
            <option value="terminé">Terminé</option>
          </select>

          <button type="submit">Ajouter la Tâche</button>
        </form>
      </section>

      <!-- Tableau affichant la dernière tâche par projet -->
      <section class="card">
        <h2>Vue des Tâches</h2>
        <table id="tasksTable">
          <thead>
            <tr>
              <th>Projet</th>
              <th>Dernière Tâche</th>
            </tr>
          </thead>
          <tbody id="tasksTableBody">
            <!-- Les lignes seront générées par JavaScript -->
          </tbody>
        </table>
      </section>
    </main>
    <footer>
      <p>© 2025 Gestion des Tâches. Tous droits réservés.</p>
    </footer>
  </div>

  <!-- Modal pour le résumé des 5 dernières tâches -->
  <div id="taskSummaryModal" class="modal">
    <div class="modal-content summary-content">
      <span class="close" onclick="closeSummaryModal()">&times;</span>
      <h2>Résumé des Tâches</h2>
      <table id="summaryTable">
        <thead>
          <tr>
            <th>Titre</th>
            <th>Statut</th>
            <th>Date d'échéance</th>
          </tr>
        </thead>
        <tbody id="summaryTableBody">
          <!-- Les 5 dernières tâches seront affichées ici -->
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>
